## USER STORY
As an existing Business Portal user, I want to manage my business information and type of work settings from a settings page, so that I can keep my information up to date and expand the services I offer without contacting support.

## DESCRIPTION
Businesses may need to add services, update the business name, and/or address after registration. This ensures users can manage business name and address without contacting support and enables flexible portal usage across AHJs. The settings will be global, affecting all connected AHJ relationships. Work type selections control navigation visibility while users with appropriate permissions maintain all system permissions regardless of enabled work types.

## FEATURE
- Add "Business Account Settings" option to the "..." (three dots) dropdown menu next to user's name in left sidebar
- Implement a modal interface for editing business information (name, address, phone, email, and work types)
- Implement automatic role assignment when work type is enabled (this means dynamycally add or delete the exising roles based on selection)
    - When Permits is selected, add "Permit Manager - Full Access" to all existing users with Admin roles. 
    - When ITM is selected, add "ITM Manager - Full Access" to all existing users with Admin Roles.
- Create new "Admin - Manage Business Info" role
- Create and add this permission "Business Account Settings" and assign to "Admin - Manage Business Info" role only
- Create database migration script to assign the "Business Account Settings" permission to the users with either "Admin - Add/Manage AHJs" OR "Admin - User Access Control" roles
- Add permission check to ensure only users with "Admin - Manage Business Info" permission can see "Business Account Settings" menu option
- Update business registration process to ensure new business accounts receive the "Business Account Settings" permission (“Admin - Manage Business Info").

## MCPs
**JIRA TICKET URL**: https://firstduedev.atlassian.net/browse/PRE-1747

**FIGMA DSIGN URL**: https://www.figma.com/design/nkBPbJqezqJREsp0or4tQx/ITM?node-id=5717-9986&m=dev

## EXAMPLES
- In `examples` folder you'll find important information about RBAC permission wich is critical for this task, also some important UI patterns that are specific for this task
- In the task is mentioned to use existing messages and validations from registering process, check these files/folders as context for those requirenments:
    - `$CODEBASE_PATH/site/client/js/components/business_portal`
    - `$CODEBASE_PATH/site/client/js/components/business_portal/signup.js`
    - `$CODEBASE_PATH/site/models/BusinessPortalSignupForm.php`
    - `$CODEBASE_PATH/site/controllers/BusinessPortalAuthController.php`
- **Important**: In `$CODEBASE_PATH/console/migrations/m250714_140825_migrate_business_portal_permissions.php` you will find some pittfalls for this task, which are related on how roles are managed in Business Portal, having the same role created multiples times attached to each business (notice that each business has an entry in client table so the code is used concatenated to the role name to allow the same role name)
    - Role dynamically assignment means to add or remove existing ITM Manager or ITM Permit related roles to the business/client
    - Take into account that when the scenario is the role being added, existing users for that business should have the role assigned automatically based on permission logic described in this task.

## Acceptance Criteria
- Given I am logged into the Business Portal, When I click the "..." menu next to my name at the bottom of the left sidebar and select "Business Account Settings", Then I see a "Business Account Settings" modal displaying my current business name, address, phone number, email, and selected work types with editable controls.
- Given I am on the Business Account Settings modal, When I attempt to save with any required field empty (business name, address, phone number, or email), Then the system displays error message (use the existing validation message during account registration).
- Given I am on the Business Account Settings modal, When I attempt to save with an invalid address format, Then the system displays error message (use the existing validation message during account registration)
- Given I am on the Business Account Settings modal with no work types selected, When I attempt to save, Then the system displays error message (use the existing validation message during account registration)
- Given I complete the business registration process as a new user, When my account is created, Then I can immediately access "Business Account Settings" from the "..." menu without requiring additional permission assignment.
- Given I have made valid changes to my business information, When I click the Save button, Then the system processes the update in under 3 seconds and displays confirmation message "Business information updated successfully."

## User Workflow
1. Business user logs into portal → System displays main dashboard with current navigation menu
2. User clicks the "..." (three dots) menu next to their name at bottom of left sidebar → System displays menu with "Business Account Settings" option
3. User selects "Business Account Settings" from the list→ System opens Business Account Settings modal displaying current business information with editable controls
4. User modifies business information fields or work type selections → System validates fields in real-time and enables Save/Cancel buttons
5. User clicks Save button → System validates all fields, processes update, and displays success message
6. User closes modal → System returns to current dashboard view with updated navigation menu visibility based on work type selections (permissions remain unchanged)